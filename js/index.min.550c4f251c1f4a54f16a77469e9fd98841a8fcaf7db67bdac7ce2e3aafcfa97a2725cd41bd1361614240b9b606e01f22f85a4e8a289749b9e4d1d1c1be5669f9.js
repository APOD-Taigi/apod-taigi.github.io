(function(){const h=document.documentElement,v="https://apod.tw/";function c(e="div"){return document.createElement(e)}function e(e){let t=document.querySelector(e);return t!=!1&&t}function d(e,t=document){let n=t.querySelectorAll(e);return!!n.length&&n}function n(e,t){e&&typeof e=="object"&&t&&(elClass=e.classList,!elClass.contains(t)&&elClass.add(t))}function m(e,t){e&&typeof e=="object"&&t&&(elClass=e.classList,!!elClass.contains(t)&&elClass.remove(t))}function s(e,t){e&&typeof e=="object"&&t&&(elClass=e.classList,elClass.contains(t)?elClass.remove(t):elClass.add(t))}function t(e,t){if(e&&typeof e=="object"&&t)return!!e.classList.contains(t)}function y(e,t){let n=e&&typeof e=="object";if(n){if(Array.isArray(t)){let n=!1;return t.forEach(function(t){e.closest(t)!=null&&(n=!0)}),!!n}if(typeof t=="string")return!!e.closest(t)}}function a(e,n,s=!1){const o=t(e,n),i=e.closest(`.${n}`);if(s&&o)return o;if(!s)return o||i}function b(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}(function(){const n=e(".year");if(n){const e=new Date,t=e.getFullYear();n.innerHTML=t}})(),function(){let r="nav_bar-wrap",c=e(`.${r}`),n=e(".nav-body"),o="nav-open",i="nav-exit",l="nav-drop",d="nav-pop",u=e(`.${l}`),m="hidden";function f(){s(u,d),s(c,m);let a=t(n,o),r=t(n,i),e=!!(a||r);e?s(n,i):s(n,o),e?s(n,o):s(n,i)}h.addEventListener("click",function(e){let t=e.target;const n=a(t,"nav-drop",!0),s=a(t,"nav-close",!0),o=a(t,"nav_bar-wrap");!!(n||s||o)&&f()})}(),function t(){let t=e(".share"),s="share-open",o="share-close",i=e(".share-trigger");function a(){n(t,s),m(t,o)}function r(){n(t,s),m(t,o)}i&&i.addEventListener("click",function(){a(),setTimeout(r,5e3)})}();function o(e,t,n=null){if(n)e.setAttribute(t,n);else return n=e.getAttribute(t),n||!1}(function(){const s=d("pre");s&&Array.from(s).forEach(function(e){const s=e.parentNode,o=!t(s,"highlight");if(o){const t=c();n(t,"highlight"),n(t,"sans"),b(e,t)}})})(),function(){let e=document.querySelectorAll("a");e&&Array.from(e).forEach(function(e){let s,a,r,i,c,l,n,d;n=o(e,"href"),d=!!(n&&typeof n=="string"&&n.startsWith("http")&&!t(e,"nav_item")&&!y(e,[".archive",".article",".post_nav",".pager"])),d&&(s="target",a="rel",r="_blank",i="noopener",c=o(e,s),l=o(e,i),!c&&o(e,s,r),!l&&o(e,a,i))})}();function g(e,t,n="icons/"){const s=`${v}${n}${e}.svg`;fetch(s).then(e=>{const t=e.status==200?e.text():"";return t}).then(e=>{t.innerHTML=e})}let f=[],p,i,_,l,r,j=["h2","h3","h4","h5","h6"];l=document.URL,j.forEach(function(e){p=document.getElementsByTagName(e),Array.prototype.push.apply(f,p)}),f.forEach(function(e){i=c("a"),i.className="link",r=e.getAttribute("id"),g("link",i,"images/icons/"),r&&(i.href=`${l}#${r}`,e.appendChild(i),n(e,"link_owner"))});const u=e=>{const t=c("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))};(function(){let t="link",n=document.querySelectorAll(`.${t}`);n&&document.body.addEventListener("click",function(e){let n=e.target;if(n.classList.contains(t)||n.parentNode.classList.contains(t)){e.preventDefault();let t=n.href!=0[0]?n.href:n.parentNode.href;u(t)}})})(),function(){let r,c,l,d,m,s,g,f,p,i;r="copy",c="copy_done",l="excerpt",f="post_copy",p="post_card",h.addEventListener("click",function(e){i=e.target;const h=i.closest(`.${r}`);d=a(i,r),m=t(i,f),d&&(e.preventDefault(),m?(s=i.closest(`.${l}`).previousElementSibling,s=!!t(s,p)&&o(s,"href")):s=window.location.href,s&&(u(s),h?n(h,c):n(i,c)))})}(),function(){let n,s,o;n=e(".aside"),s=n?n.previousElementSibling:null,n&&s.nodeName.toLowerCase()==="h3"&&(o=Array.from(n.children),o.length<1&&s.remove())}(),function(){let n=e(".btn_back"),s=window.history;n&&n.addEventListener("click",function(){s.back()})}(),function(){function t(e){let t=d(e);t&&Array.from(t).forEach(function(e){e.loading="lazy"})}t("iframe"),t("img")}()})()